{"ast":null,"code":"import { useHistory } from 'react-router-dom';\nimport axiosInstance from './axiosjuicer';\n\nclass Auth {\n  constructor() {\n    this.authenticated = false;\n  }\n\n  register(username, password) {\n    var _s = $RefreshSig$();\n\n    axiosInstance.post('newuser/', {\n      username: username,\n      password: password\n    }).then(_s(res => {\n      _s();\n\n      const history = useHistory(); //window.location.href = theRedirect\n      //history.push('/login');            \n    }, \"9cZfZ04734qoCGIctmKX7+sX6eU=\", false, function () {\n      return [useHistory];\n    })).catch(err => {\n      alert('Try again');\n    });\n  }\n\n  login(login, ppassword, theRedirect) {\n    // make a function to actually Login\n    axiosInstance.post('token/', {\n      username: login,\n      password: ppassword\n    }).then(res => {\n      localStorage.setItem('access_token', res.data.access);\n      localStorage.setItem('refresh_token', res.data.refresh);\n      localStorage.setItem('theusername', login); //history.push('/issues')\n\n      if (theRedirect) {\n        window.location.href = theRedirect;\n      } else {\n        window.location.href = 'http://127.0.0.1:3000/issues';\n      }\n    }).catch(err => {\n      //console.log(err.response.data['detail']);\n      //console.log('idk man');\n      //console.log(err);\n      alert('Try again');\n    });\n  }\n\n  logout() {\n    // make a function to actually Logout\n    this.authenticated = false;\n    localStorage.clear();\n  }\n\n  isAuthenticated() {\n    return this.authenticated;\n  }\n\n}\n\nexport default new Auth();","map":{"version":3,"sources":["C:/Users/LENOVO S30/Documents/Reactjs/theapp/src/components/auth.js"],"names":["useHistory","axiosInstance","Auth","constructor","authenticated","register","username","password","post","then","res","history","catch","err","alert","login","ppassword","theRedirect","localStorage","setItem","data","access","refresh","window","location","href","logout","clear","isAuthenticated"],"mappings":"AAAA,SAASA,UAAT,QAA2B,kBAA3B;AACA,OAAOC,aAAP,MAA0B,eAA1B;;AAGA,MAAMC,IAAN,CAAW;AACPC,EAAAA,WAAW,GAAG;AACV,SAAKC,aAAL,GAAqB,KAArB;AACH;;AAEDC,EAAAA,QAAQ,CAACC,QAAD,EAAWC,QAAX,EAAoB;AAAA;;AACxBN,IAAAA,aAAa,CAACO,IAAd,CAAmB,UAAnB,EAA8B;AAACF,MAAAA,QAAQ,EAACA,QAAV;AAAoBC,MAAAA,QAAQ,EAACA;AAA7B,KAA9B,EAAsEE,IAAtE,IAA4EC,GAAD,IAAQ;AAAA;;AAC/E,YAAMC,OAAO,GAAGX,UAAU,EAA1B,CAD+E,CAE/E;AACA;AAEH,KALD;AAAA,cACoBA,UADpB;AAAA,QAKGY,KALH,CAKUC,GAAD,IAAS;AACdC,MAAAA,KAAK,CAAC,WAAD,CAAL;AACH,KAPD;AAQH;;AAEDC,EAAAA,KAAK,CAACA,KAAD,EAAQC,SAAR,EAAmBC,WAAnB,EAA+B;AAAE;AAElChB,IAAAA,aAAa,CAACO,IAAd,CAAmB,QAAnB,EAA4B;AAACF,MAAAA,QAAQ,EAACS,KAAV;AAAiBR,MAAAA,QAAQ,EAACS;AAA1B,KAA5B,EAAkEP,IAAlE,CAAwEC,GAAD,IAAQ;AAC3EQ,MAAAA,YAAY,CAACC,OAAb,CAAqB,cAArB,EAAqCT,GAAG,CAACU,IAAJ,CAASC,MAA9C;AACAH,MAAAA,YAAY,CAACC,OAAb,CAAqB,eAArB,EAAsCT,GAAG,CAACU,IAAJ,CAASE,OAA/C;AACAJ,MAAAA,YAAY,CAACC,OAAb,CAAqB,aAArB,EAAoCJ,KAApC,EAH2E,CAI3E;;AACA,UAAGE,WAAH,EAAe;AACXM,QAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuBR,WAAvB;AACH,OAFD,MAEK;AACDM,QAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,8BAAvB;AACH;AAEJ,KAXD,EAWGb,KAXH,CAWUC,GAAD,IAAS;AACd;AACA;AACA;AACAC,MAAAA,KAAK,CAAC,WAAD,CAAL;AACH,KAhBD;AAiBH;;AAEDY,EAAAA,MAAM,GAAE;AAAE;AACN,SAAKtB,aAAL,GAAqB,KAArB;AACAc,IAAAA,YAAY,CAACS,KAAb;AACH;;AAEDC,EAAAA,eAAe,GAAE;AACb,WAAO,KAAKxB,aAAZ;AACH;;AA5CM;;AA+CX,eAAe,IAAIF,IAAJ,EAAf","sourcesContent":["import { useHistory } from 'react-router-dom';\r\nimport axiosInstance from './axiosjuicer'\r\n\r\n\r\nclass Auth {\r\n    constructor() {\r\n        this.authenticated = false;\r\n    }\r\n\r\n    register(username, password){\r\n        axiosInstance.post('newuser/',{username:username, password:password}).then((res) =>{\r\n            const history = useHistory();\r\n            //window.location.href = theRedirect\r\n            //history.push('/login');            \r\n            \r\n        }).catch((err) => {\r\n            alert('Try again');\r\n        });\r\n    }\r\n\r\n    login(login, ppassword, theRedirect){ // make a function to actually Login\r\n\r\n        axiosInstance.post('token/',{username:login, password:ppassword}).then((res) =>{\r\n            localStorage.setItem('access_token', res.data.access);\r\n            localStorage.setItem('refresh_token', res.data.refresh);\r\n            localStorage.setItem('theusername', login);\r\n            //history.push('/issues')\r\n            if(theRedirect){\r\n                window.location.href = theRedirect\r\n            }else{\r\n                window.location.href = 'http://127.0.0.1:3000/issues'\r\n            }\r\n            \r\n        }).catch((err) => {\r\n            //console.log(err.response.data['detail']);\r\n            //console.log('idk man');\r\n            //console.log(err);\r\n            alert('Try again');\r\n        });\r\n    }\r\n\r\n    logout(){ // make a function to actually Logout\r\n        this.authenticated = false;\r\n        localStorage.clear();\r\n    }\r\n\r\n    isAuthenticated(){\r\n        return this.authenticated;\r\n    }\r\n}\r\n\r\nexport default new Auth();"]},"metadata":{},"sourceType":"module"}